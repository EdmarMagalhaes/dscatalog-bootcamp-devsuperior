{"ast":null,"code":"var _jsxFileName = \"C:\\\\projetos\\\\dscatalog-bootcamp-devsuperior\\\\front-web\\\\src\\\\pages\\\\Admin\\\\components\\\\Products\\\\List\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { makePrivateRequest, makeRequest } from 'core/utils/request';\nimport Pagination from 'core/components/Pagination';\nimport Card from '../Card';\nimport CardLoader from '../Loaders/ProductCardLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst List = () => {\n  _s();\n\n  const [productsResponse, setProductsResponse] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [activePage, setActivePage] = useState(0);\n  const history = useHistory();\n  const getProducts = useCallback(() => {\n    const params = {\n      page: activePage,\n      linesPerPage: 4,\n      direction: 'DESC',\n      orderBy: 'id'\n    };\n    setIsLoading(true);\n    makeRequest({\n      url: '/products',\n      params\n    }).then(response => setProductsResponse(response.data)).finally(() => {\n      setIsLoading(false);\n    });\n  }, [activePage]);\n  useEffect(() => {\n    getProducts();\n  }, [getProducts]);\n\n  const handleCreate = () => {\n    history.push('/admin/products/create');\n  };\n\n  const onRemove = productId => {\n    const confirm = window.confirm('Deseja realmente excluir este produto?');\n\n    if (confirm) {\n      makePrivateRequest({\n        url: `/products/${productId}`,\n        method: 'DELETE'\n      }).then(() => {\n        toast.info('Produto removido com sucesso!');\n        getProducts();\n      }).catch(() => {\n        toast.error('Erro ao remover produto!');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-products-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary btn-lg\",\n      onClick: handleCreate,\n      children: \"ADICIONAR\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-list-container\",\n      children: [isLoading ? /*#__PURE__*/_jsxDEV(CardLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 22\n      }, this) : productsResponse === null || productsResponse === void 0 ? void 0 : productsResponse.content.map(product => /*#__PURE__*/_jsxDEV(Card, {\n        product: product,\n        onRemove: onRemove\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this)), productsResponse && /*#__PURE__*/_jsxDEV(Pagination, {\n        totalPages: productsResponse.totalPages,\n        activePage: activePage,\n        onChange: page => setActivePage(page)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(List, \"IkeIGQlEOMrtKpoZ+zKFXWSA6Ts=\", false, function () {\n  return [useHistory];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["C:/projetos/dscatalog-bootcamp-devsuperior/front-web/src/pages/Admin/components/Products/List/index.tsx"],"names":["React","useEffect","useState","useCallback","useHistory","toast","makePrivateRequest","makeRequest","Pagination","Card","CardLoader","List","productsResponse","setProductsResponse","isLoading","setIsLoading","activePage","setActivePage","history","getProducts","params","page","linesPerPage","direction","orderBy","url","then","response","data","finally","handleCreate","push","onRemove","productId","confirm","window","method","info","catch","error","content","map","product","id","totalPages"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,WAArC,QAAwD,OAAxD;AAEA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,kBAAT,EAA6BC,WAA7B,QAAgD,oBAAhD;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACjB,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CX,QAAQ,EAAxD;AACA,QAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAMgB,OAAO,GAAGd,UAAU,EAA1B;AAEA,QAAMe,WAAW,GAAGhB,WAAW,CAAC,MAAM;AACpC,UAAMiB,MAAM,GAAG;AACbC,MAAAA,IAAI,EAAEL,UADO;AAEbM,MAAAA,YAAY,EAAE,CAFD;AAGbC,MAAAA,SAAS,EAAE,MAHE;AAIbC,MAAAA,OAAO,EAAE;AAJI,KAAf;AAMAT,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAR,IAAAA,WAAW,CAAC;AAAEkB,MAAAA,GAAG,EAAE,WAAP;AAAoBL,MAAAA;AAApB,KAAD,CAAX,CACGM,IADH,CACQC,QAAQ,IAAId,mBAAmB,CAACc,QAAQ,CAACC,IAAV,CADvC,EAEGC,OAFH,CAEW,MAAM;AACbd,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAJH;AAKD,GAb8B,EAa5B,CAACC,UAAD,CAb4B,CAA/B;AAeAf,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;;AAIA,QAAMW,YAAY,GAAG,MAAM;AACzBZ,IAAAA,OAAO,CAACa,IAAR,CAAa,wBAAb;AACD,GAFD;;AAIA,QAAMC,QAAQ,GAAIC,SAAD,IAAuB;AACtC,UAAMC,OAAO,GAAGC,MAAM,CAACD,OAAP,CAAe,wCAAf,CAAhB;;AAEA,QAAIA,OAAJ,EAAa;AACX5B,MAAAA,kBAAkB,CAAC;AAAEmB,QAAAA,GAAG,EAAG,aAAYQ,SAAU,EAA9B;AAAiCG,QAAAA,MAAM,EAAE;AAAzC,OAAD,CAAlB,CACGV,IADH,CACQ,MAAM;AACVrB,QAAAA,KAAK,CAACgC,IAAN,CAAW,+BAAX;AACAlB,QAAAA,WAAW;AACZ,OAJH,EAKGmB,KALH,CAKS,MAAM;AACXjC,QAAAA,KAAK,CAACkC,KAAN,CAAY,0BAAZ;AACD,OAPH;AAQD;AACF,GAbD;;AAeA,sBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA,4BACE;AAAQ,MAAA,SAAS,EAAC,wBAAlB;AAA2C,MAAA,OAAO,EAAET,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA,iBACGhB,SAAS,gBAAG,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,cAAH,GACRF,gBADQ,aACRA,gBADQ,uBACRA,gBAAgB,CAAE4B,OAAlB,CAA0BC,GAA1B,CAA8BC,OAAO,iBACnC,QAAC,IAAD;AAAM,QAAA,OAAO,EAAEA,OAAf;AAAyC,QAAA,QAAQ,EAAEV;AAAnD,SAA6BU,OAAO,CAACC,EAArC;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,EAMG/B,gBAAgB,iBACf,QAAC,UAAD;AACE,QAAA,UAAU,EAAEA,gBAAgB,CAACgC,UAD/B;AAEE,QAAA,UAAU,EAAE5B,UAFd;AAGE,QAAA,QAAQ,EAAEK,IAAI,IAAIJ,aAAa,CAACI,IAAD;AAHjC;AAAA;AAAA;AAAA;AAAA,cAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqBD,CAjED;;GAAMV,I;UAIYP,U;;;KAJZO,I;AAmEN,eAAeA,IAAf","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { ProductsResponse } from 'core/types/Product';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { makePrivateRequest, makeRequest } from 'core/utils/request';\r\nimport Pagination from 'core/components/Pagination';\r\nimport Card from '../Card';\r\nimport CardLoader from '../Loaders/ProductCardLoader';\r\n\r\nconst List = () => {\r\n  const [productsResponse, setProductsResponse] = useState<ProductsResponse>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [activePage, setActivePage] = useState(0);\r\n  const history = useHistory();\r\n  \r\n  const getProducts = useCallback(() => {\r\n    const params = {\r\n      page: activePage,\r\n      linesPerPage: 4,\r\n      direction: 'DESC',\r\n      orderBy: 'id'\r\n    }\r\n    setIsLoading(true);\r\n    makeRequest({ url: '/products', params })\r\n      .then(response => setProductsResponse(response.data))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, [getProducts]);\r\n\r\n  const handleCreate = () => {\r\n    history.push('/admin/products/create');\r\n  }\r\n\r\n  const onRemove = (productId: number) => {\r\n    const confirm = window.confirm('Deseja realmente excluir este produto?');\r\n\r\n    if (confirm) {\r\n      makePrivateRequest({ url: `/products/${productId}`, method: 'DELETE' })\r\n        .then(() => {\r\n          toast.info('Produto removido com sucesso!');\r\n          getProducts();\r\n        })\r\n        .catch(() => {\r\n          toast.error('Erro ao remover produto!');\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-products-list\">\r\n      <button className=\"btn btn-primary btn-lg\" onClick={handleCreate}>\r\n        ADICIONAR\r\n      </button>\r\n      <div className=\"admin-list-container\">\r\n        {isLoading ? <CardLoader /> : (\r\n          productsResponse?.content.map(product => (\r\n            <Card product={product} key={product.id} onRemove={onRemove} />\r\n          ))\r\n        )}\r\n        {productsResponse && (\r\n          <Pagination\r\n            totalPages={productsResponse.totalPages}\r\n            activePage={activePage}\r\n            onChange={page => setActivePage(page)}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List;"]},"metadata":{},"sourceType":"module"}