{"ast":null,"code":"var _jsxFileName = \"C:\\\\projetos\\\\dscatalog-bootcamp-devsuperior\\\\front-web\\\\src\\\\pages\\\\Auth\\\\components\\\\Login\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport ButtonIcon from 'core/components/ButtonIcon';\nimport AuthCard from '../Card';\nimport './styles.scss';\nimport { makeLogin } from 'core/utils/request';\nimport { saveSessionData } from 'core/utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [hasError, setHasError] = useState(false);\n  const history = useHistory();\n  let location = useLocation();\n  const {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/admin\"\n    }\n  };\n\n  const onSubmit = data => {\n    makeLogin(data).then(response => {\n      setHasError(false);\n      saveSessionData(response.data);\n      history.replace(from);\n    }).catch(() => {\n      setHasError(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthCard, {\n    title: \"login\",\n    children: [hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger mt-5\",\n      children: \"Usu\\xE1rio ou senha inv\\xE1lidos!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form\",\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"margin-bottom-30\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: `form-control input-base ${errors.username ? 'is-invalid' : ''}`,\n          placeholder: \"Email\",\n          name: \"username\",\n          ref: register({\n            required: \"Campo obrigatório\",\n            pattern: {\n              value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n              message: \"Email inválido\"\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), errors.username && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback d-block\",\n          children: errors.username.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"margin-bottom-30\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: `form-control input-base ${errors.password ? 'is-invalid' : ''}`,\n          placeholder: \"Senha\",\n          name: \"password\",\n          ref: register({\n            required: \"Campo obrigatório\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), errors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback d-block\",\n          children: errors.password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/auth/recover\",\n        className: \"login-link-recover\",\n        children: \"Esqueci a senha?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-submit\",\n        children: /*#__PURE__*/_jsxDEV(ButtonIcon, {\n          text: \"logar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"not-registered\",\n          children: \"N\\xE3o tem Cadastro?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/auth/register\",\n          className: \"login-link-register\",\n          children: \"CADASTRAR\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"9QXC03MnJRk2or7OvtCTbkw/slo=\", false, function () {\n  return [useForm, useHistory, useLocation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/projetos/dscatalog-bootcamp-devsuperior/front-web/src/pages/Auth/components/Login/index.tsx"],"names":["React","useState","Link","useHistory","useLocation","useForm","ButtonIcon","AuthCard","makeLogin","saveSessionData","Login","register","handleSubmit","errors","hasError","setHasError","history","location","from","state","pathname","onSubmit","data","then","response","replace","catch","username","required","pattern","value","message","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport ButtonIcon from 'core/components/ButtonIcon';\r\nimport AuthCard from '../Card';\r\nimport './styles.scss';\r\nimport { makeLogin } from 'core/utils/request';\r\nimport { saveSessionData } from 'core/utils/auth';\r\n\r\ntype FormState = {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\ntype LocationState = {\r\n  from: string;\r\n}\r\n\r\nconst Login = () => {\r\n  const { register, handleSubmit, errors } = useForm<FormState>(); \r\n  const [hasError, setHasError] = useState(false);\r\n  const history = useHistory();\r\n  let location = useLocation<LocationState>();\r\n\r\n  const { from } = location.state || { from: { pathname: \"/admin\" } };\r\n\r\n  const onSubmit = (data: FormState) => {\r\n    makeLogin(data)\r\n      .then(response => {\r\n        setHasError(false);\r\n        saveSessionData(response.data);\r\n        history.replace(from);   \r\n      })\r\n      .catch(() => {\r\n        setHasError(true);\r\n      })\r\n  }\r\n\r\n  return (\r\n    <AuthCard title=\"login\">\r\n      {hasError && (\r\n        <div className=\"alert alert-danger mt-5\">\r\n          Usuário ou senha inválidos!\r\n        </div>\r\n      )}\r\n      <form className=\"login-form\" onSubmit={handleSubmit(onSubmit)}>\r\n        <div className=\"margin-bottom-30\">\r\n          <input\r\n            type=\"email\"\r\n            className={`form-control input-base ${errors.username ? 'is-invalid' : '' }`}\r\n            placeholder=\"Email\"\r\n            name=\"username\"\r\n            ref={register({\r\n              required: \"Campo obrigatório\",\r\n              pattern: {\r\n                value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                message: \"Email inválido\"\r\n              }\r\n            })}\r\n          />\r\n          {errors.username && (\r\n            <div className=\"invalid-feedback d-block\">\r\n              {errors.username.message}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"margin-bottom-30\">\r\n          <input\r\n            type=\"password\"\r\n            className={`form-control input-base ${errors.password ? 'is-invalid' : '' }`}\r\n            placeholder=\"Senha\"\r\n            name=\"password\"\r\n            ref={register({ required: \"Campo obrigatório\" })} \r\n          />\r\n          {errors.password && (\r\n            <div className=\"invalid-feedback d-block\">\r\n              {errors.password.message}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <Link to=\"/auth/recover\" className=\"login-link-recover\">\r\n          Esqueci a senha?\r\n        </Link>\r\n        <div className=\"login-submit\">\r\n          <ButtonIcon text=\"logar\" />\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <span className=\"not-registered\">\r\n            Não tem Cadastro?\r\n          </span>\r\n          <Link to=\"/auth/register\" className=\"login-link-register\">\r\n            CADASTRAR\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </AuthCard>\r\n  )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}